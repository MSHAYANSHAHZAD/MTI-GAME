<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Master The Instruction</title>

<link rel="manifest" href="manifest.json">

<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js");
}
</script>

<style>
body {
  margin:0;
  background:#000;
  font-family:Arial, sans-serif;
  color:white;
  text-align:center;
}
#game {
  max-width:400px;
  margin:auto;
  padding-top:40px;
}
#instruction {
  font-size:24px;
  margin:20px;
  min-height:60px;
}
#signal {
  font-size:40px;
  margin:20px;
  height:50px;
}
#timer {
  font-size:20px;
  margin:10px;
  color:#00ffff;
}
#btn {
  width:200px;
  height:200px;
  border-radius:50%;
  background:#00ffff;
  border:none;
  font-size:22px;
  font-weight:bold;
  color:#000;
}
#score {
  font-size:20px;
  margin-top:20px;
}
</style>
</head>
<body>

<div id="game">
  <h2>ðŸŽ® MASTER THE INSTRUCTION ðŸŽ®</h2>
  <div id="instruction">Press Start</div>
  <div id="signal"></div>
  <div id="timer">Time: 10</div>
  <button id="btn">START</button>
  <div id="score">Score: 0</div>
</div>

<script>
const instructionText = document.getElementById("instruction");
const signalText = document.getElementById("signal");
const timerText = document.getElementById("timer");
const button = document.getElementById("btn");
const scoreText = document.getElementById("score");

let score = 0;
let waitingForPress = false;
let correctPressTime = false;
let gameStarted = false;
let timerInterval;
let timeLeft = 10;

const instructions = [
  { text:"Press when you see GO", signal:"GO", correct:true },
  { text:"DON'T press when STOP appears", signal:"STOP", correct:false },
  { text:"Press immediately when NOW appears", signal:"NOW", correct:true },
  { text:"Wait... then press when â˜… appears", signal:"â˜…", correct:true },
  { text:"If text says NOW, do NOT press", signal:"NOW", correct:false },
  { text:"Press only if symbol is ðŸ”µ", signal:"ðŸ”µ", correct:true },
  { text:"Ignore this instruction ðŸ˜ˆ", signal:"GO", correct:false },
  { text:"Press when you see YES", signal:"YES", correct:true }
];

function randomInstruction(){
  return instructions[Math.floor(Math.random()*instructions.length)];
}

function startTimer(){
  timeLeft = 10;
  timerText.innerText = "Time: " + timeLeft;

  timerInterval = setInterval(()=>{
    timeLeft--;
    timerText.innerText = "Time: " + timeLeft;

    if(timeLeft <= 0){
      clearInterval(timerInterval);
      if(waitingForPress) gameOver();
    }
  },1000);
}

function startRound(){
  const inst = randomInstruction();
  instructionText.innerText = inst.text;
  signalText.innerText = "";
  correctPressTime = false;
  waitingForPress = true;

  setTimeout(()=>{
    signalText.innerText = inst.signal;
    correctPressTime = inst.correct;
    startTimer();
  },1000);
}

function gameOver(){
  alert("ðŸ’¥ Game Over!\nScore: " + score);
  location.reload();
}

button.addEventListener("click", ()=>{
  if(!gameStarted){
    gameStarted = true;
    button.innerText = "PRESS";
    startRound();
    return;
  }

  if(!waitingForPress){
    gameOver();
    return;
  }

  waitingForPress = false;
  clearInterval(timerInterval);

  if(correctPressTime){
    score++;
    scoreText.innerText = "Score: " + score;
    setTimeout(startRound, 500);
  } else {
    gameOver();
  }
});
</script>

</body>
</html>
